"use client";

import { cn } from "@/lib/utils";

interface DownloadButtonProps {
  os: "windows" | "macos" | "linux";
  primary?: boolean;
  href: string;
  size?: string;
}

const osConfig = {
  windows: {
    label: "Windows",
    ext: ".exe",
    icon: (
      <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801" />
      </svg>
    ),
  },
  macos: {
    label: "macOS",
    ext: ".dmg",
    icon: (
      <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z" />
      </svg>
    ),
  },
  linux: {
    label: "Linux",
    ext: ".AppImage",
    icon: (
      <svg className="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.368 1.884 1.43.39.03.8-.066 1.109-.199.69-.3 1.286-.838 1.314-1.512.014-.394-.122-.553-.272-.882-.19-.39-.342-.6-.368-.94-.007-.098-.006-.199-.002-.398.048-.267.16-.333.187-.685.003-.7-.488-1.133-1.066-1.468-.158-.09-.312-.148-.39-.207-.13-.133-.256-.209-.385-.467-.127-.27-.174-.48-.178-.74-.004-.133.01-.267-.012-.4-.082-.466-.267-.757-.382-.992-.109-.267-.182-.465-.078-.667.176-.345.398-.532.647-.668.167-.1.333-.166.478-.401.143-.234.203-.533.16-.765a.564.564 0 00-.199-.382c-.108-.1-.266-.166-.338-.267-.138-.2-.28-.467-.466-.467-.1-.003-.2.066-.298.133-.12.066-.254.133-.466.133a1.16 1.16 0 01-.499-.118c-.218-.109-.29-.267-.39-.333-.26-.2-.483-.267-.617-.267-.24 0-.411.136-.515.273a3.71 3.71 0 01-.2-.467c-.157-.532-.153-1.265-.37-1.93-.163-.6-.44-1.2-.965-1.464-.525-.262-1.024-.136-1.31.067-.317.199-.46.468-.54.8-.071.333-.111.733-.137 1.199-.022.4-.037.733-.065.999a2.015 2.015 0 01-.165.666c-.116.2-.259.332-.408.401a1.158 1.158 0 01-.632.067c.013-.4.008-.8 0-1.199-.037-.6-.112-1.199-.262-1.732-.138-.465-.338-.862-.634-1.133-.29-.275-.666-.4-1.06-.401h-.003c-.396 0-.771.124-1.059.401-.29.271-.496.668-.637 1.133-.15.533-.227 1.132-.262 1.732-.008.4-.013.8 0 1.199a1.158 1.158 0 01-.632-.067 1.152 1.152 0 01-.41-.401 2.015 2.015 0 01-.165-.666c-.028-.266-.043-.599-.065-.999-.026-.466-.066-.866-.137-1.199-.08-.332-.223-.601-.54-.8-.286-.203-.785-.329-1.31-.067-.525.264-.802.864-.965 1.464-.218.665-.213 1.398-.37 1.93-.065.2-.135.334-.2.467a.84.84 0 00-.515-.273c-.134 0-.357.067-.617.267-.1.066-.172.224-.39.333a1.16 1.16 0 01-.499.118c-.212 0-.346-.067-.466-.133-.098-.067-.198-.136-.298-.133-.186 0-.328.267-.466.467-.072.101-.23.167-.338.267a.564.564 0 00-.199.382c-.043.232.017.531.16.765.145.235.311.301.478.401.249.136.471.323.647.668.104.202.031.4-.078.667-.115.235-.3.526-.382.992-.022.133-.008.267-.012.4-.004.26-.051.47-.178.74-.129.258-.255.334-.385.467-.078.059-.232.117-.39.207-.578.335-1.069.768-1.066 1.468.027.352.184.418.187.685.004.199.005.3-.002.398-.026.34-.178.55-.368.94-.15.329-.286.488-.272.882.028.674.624 1.212 1.314 1.512.309.133.719.229 1.109.199.771-.062 1.493-.652 1.884-1.43l.003-.003c.051-.135.089-.199.114-.333 1.003.067 1.878-.258 2.577-.2 1.03.065 1.673.331 2.26.334.238.482.682.83 1.208.946.75.2 1.69-.004 2.616-.47.864-.465 1.964-.4 2.774-.6.405-.131.766-.267.94-.601.174-.339.143-.804-.106-1.484-.076-.242-.018-.571.04-.97.028-.136.055-.337.055-.536.004-.208-.042-.413-.132-.602-.206-.411-.551-.544-.864-.68-.312-.133-.598-.201-.797-.4a3.696 3.696 0 01-.663-.839.424.424 0 00-.11-.135c.123-.805-.009-1.657-.287-2.489-.589-1.771-1.831-3.47-2.716-4.521-.75-1.067-.974-1.928-1.05-3.02-.065-1.491 1.056-5.965-3.17-6.298A6.106 6.106 0 0012.504 0z" />
      </svg>
    ),
  },
};

export default function DownloadButton({ os, primary, href, size }: DownloadButtonProps) {
  const config = osConfig[os];

  return (
    <a
      href={href}
      className={cn(
        "inline-flex items-center gap-3 px-6 py-3 rounded-xl font-medium transition-all duration-200",
        primary
          ? "bg-brand-500 hover:bg-brand-600 text-white shadow-lg shadow-brand-500/25 hover:shadow-brand-500/40 hover:scale-[1.02]"
          : "bg-white dark:bg-surface-200 border border-gray-200 dark:border-white/10 text-gray-900 dark:text-white hover:border-brand-500/30 hover:shadow-md"
      )}
    >
      {config.icon}
      <div className="text-left">
        <div className="text-sm font-semibold">Download for {config.label}</div>
        <div className={cn("text-xs", primary ? "text-white/70" : "text-gray-500 dark:text-gray-400")}>
          {config.ext}{size ? ` - ${size}` : ""}
        </div>
      </div>
    </a>
  );
}
